library(tidyverse)
library(rvest)
library(here)
# scrape_pac <- function(url) {
#
# read the page
page <- read_html("https://www.opensecrets.org/political-action-committees-pacs/foreign-connected-pacs/2020")
# exract the table
pac <-
page %>%
html_table(header = TRUE, fill=TRUE)
# convert to a tibble
pac <- pac[[1]] %>%
as_tibble()
View(pac)
glimpse(pac)
library(tidyverse)
library(rvest)
library(here)
page <- read_html("https://www.opensecrets.org/political-action-committees-pacs/foreign-connected-pacs/2020")
# exract the table
pac <-
page %>%
html_table(header = TRUE, fill=TRUE)
# convert to a tibble
pac <- pac[[1]] %>%
as_tibble()
glimpse(pac)
View(page)
View(pac)
variable.names(pac)
library(tidyverse)
str_squish(pac$`Country of Origin/Parent Company`)
str_squish(pac$`Country of Origin/Parent Company`)
test <- str_squish(pac$`Country of Origin/Parent Company`)
test
pac %>%
str_squish(`Country of Origin/Parent Company`)
pac %>%
str_squish(`Country of Origin/Parent Company`)
pac %>%
str_squish(`Country of Origin/Parent Company`)
pac %>%
str_squish(Total)
str_squish(pac$Total)
str_squish(pac$`Country of Origin/Parent Company`)
View(pac)
str_squish(pac$`Country of Origin/Parent Company`)
page <- read_html("https://www.opensecrets.org/political-action-committees-pacs/foreign-connected-pacs/2020")
page <-
page %>%
mutate(year = str_sub(page, start = -1, end = -4))
page
page <- "https://www.opensecrets.org/political-action-committees-pacs/foreign-connected-pacs/2020")
page <- "https://www.opensecrets.org/political-action-committees-pacs/foreign-connected-pacs/2020"
page_url <- "https://www.opensecrets.org/political-action-committees-pacs/foreign-connected-pacs/2020"
df <- tibble(neue_var = "test")
# URL Endung in Dataframe speichern
df <-
df %>%
mutate(year = str_sub(page_url, start = -1, end = -4))
df
# URL Endung in Dataframe speichern
df <-
df %>%
mutate(year = str_sub(page_url, start = -4, end = -1))
df
